# 第三章: 真実の姿を現す（条件分岐とリアクティブ） 🫣

---

### 🐣 「先輩、ボタンを押したら『RESET』になったんですけど、もう一回押しても元に戻りません...」
### 🦉 「一度『アチーー!!』になったら、そのままじゃからな。元に戻すには『今どうなっているか』を確認して、処理を分ける必要がある」
### 🐣 「if文ってやつですね！」
### 🦉 「その通り！Vue.jsの世界でもJavaScriptのif文がそのまま使えるぞ」

---

## 🔀 状況によって動きを変える

「押された状態」か「まだ押されていない状態」かによって、ボタンを押したときの動作を変えたいですよね。
そのために、**フラグ（目印）** を使います。

今回は `isPushed` という変数（ref）がその役割を果たします。

```js
// true = 押された状態 / false = まだの状態
const isPushed = ref(false)

const handleClick = () => {
  if (isPushed.value) {
    // すでに押されているなら、リセットする
    isPushed.value = false
    // ...元に戻す処理
  } else {
    // まだ押されていないなら、ドカンといってみよう
    isPushed.value = true
    // ...アチーー!!にする処理
  }
}
```

### 🪄 魔法のスイッチ「v-if」

画面上の要素も、条件によって出したり消したりできます。
ここで登場するのが **`v-if`** です。

```html
<template>
  <!-- isPushed が true のときだけ表示される -->
  <div v-if="isPushed">
    <p>押してしまったな...！</p>
  </div>
</template>
```

---

## 📝 今回のミッション

### 1. ロジックを完成させる
`handleClick` 関数を修正して、クリックするたびに「通常モード」と「熱湯モード」が切り替わるようにしてください。

- **if (isPushed.value)** のとき（リセット処理）
  - `telop` → `'絶対に押すなよ!?'`
  - `mainImg` → `furiImg`
  - `btnText` → `'PUSH'`
  - `isPushed` → `false`

- **else** のとき（アクション処理）
  - `telop` → `'アチーー!!'`
  - `mainImg` → `ochiImg`
  - `btnText` → `'RESET'`
  - `isPushed` → `true`

### 2. 赤い画面（オーバーレイ）を作る
「アチーー!!」となったときだけ、画面全体を赤くするオーバーレイを表示しましょう。
スタイルシートに `.overlay` クラスが用意してあります。

```html
<!-- isPushed が true のときだけ表示される div を追加 -->
<div v-if="isPushed" class="overlay"></div>
```
これを `<template>` の最後に追加してください。

---

## 🚨 ここでハマる！よくある間違いチェック

### ❌ エラー：isPushed is not defined
- `<script setup>` の中で `const isPushed = ref(false)` を定義しましたか？

### ❌ リセットされない！永遠に「アチーー!!」のまま
- `if` の中で `isPushed.value = false` に戻すのを忘れていませんか？
- フラグを戻さないと、次も「すでに押されている」と判断されてしまいます。

### 🐣 「うわっ！画面が赤くなった！びっくりしたー！」
### 🦉 「ふぉっふぉっふぉ。`v-if` は要素そのものを消したり作ったりする強力な魔法じゃ。タイミングよく使えば効果的な演出ができるぞ」

---

[👉 第四章へ進む (chapter4.md)](./chapter4.md)
