# 第三章: 真実の姿を現す（条件分岐とリアクティブ） 🫣

---

### 🐣 「先輩、ボタンを押したら『RESET』になったんですけど、もう一回押しても元に戻りません...」
### 🦉 「一度『アチーー!!』になったら、そのままじゃからな。元に戻すには『今どうなっているか』を確認して、処理を分ける必要がある」
### 🐣 「あ！ゲームでいう『もし〜なら』ってやつですね！」
### 🦉 「その通り！プログラムの世界ではそれを『条件分岐』と呼ぶ。道が二手に分かれるイメージじゃな」

---

## 🔀 状況によって動きを変える（if文）

「すでに押されているとき」はリセットしたい。
「まだ押されていないとき」はアクションを起こしたい。

このように**「状況によってやることを変えたい」**ときは、**`if`（もし〜なら）** という書き方を使います。
その判断材料として、今回は `isPushed` という変数（ref）が「いま押されてる？」という旗（フラグ）の役割を果たします。

```js
// true = 押された状態 / false = まだの状態
const isPushed = ref(false)

const handleClick = () => {
  // もし、すでに押されているなら...
  if (isPushed.value) {
    // リセットする処理を書く
    isPushed.value = false
  } 
  // そうじゃないなら（まだ押されていないなら）...
  else {
    // ドカンといってみよう
    isPushed.value = true
  }
}
```

### 🪄 魔法のスイッチ「v-if」

JavaScriptだけでなく、画面上の要素（HTML）も条件によって出したり消したりできます。
これには **`v-if`** を使います。

```html
<template>
  <!-- もし isPushed が true なら、この div を表示する -->
  <div v-if="isPushed">
    <p>押してしまったな...！</p>
  </div>
</template>
```

---

## 📝 今回のミッション

### 1. ロジックを完成させる
`handleClick` の中身を書き換えて、クリックするたびに「通常モード」と「熱湯モード」が切り替わるようにしてください。

- **if (isPushed.value)** のとき（＝すでに押されてて、リセットしたい時）
  - `telop` → `'絶対に押すなよ!?'`
  - `mainImg` → `furiImg`
  - `btnText` → `'PUSH'`
  - `isPushed` → `false`（忘れずに！）

- **else** のとき（＝まだ押されてなくて、アクションしたい時）
  - `telop` → `'アチーー!!'`
  - `mainImg` → `ochiImg`
  - `btnText` → `'RESET'`
  - `isPushed` → `true`（忘れずに！）

### 2. 赤い画面（オーバーレイ）を作る
「アチーー!!」となったときだけ、画面全体を赤くするオーバーレイを表示しましょう。
スタイルシートに `.overlay` クラスが用意してあります。

```html
<!-- isPushed が true のときだけ表示される div を追加 -->
<div v-if="isPushed" class="overlay"></div>
```
これを `<template>` の最後に追加してください。

---

## 🚨 ここでハマる！よくある間違いチェック

### ❌ エラー：isPushed is not defined
- `<script setup>` の中で `const isPushed = ref(false)` を定義しましたか？

### ❌ リセットされない！永遠に「アチーー!!」のまま
- `if` の中で `isPushed.value = false` に戻すのを忘れていませんか？
- 旗（フラグ）を戻さないと、次も「すでに押されている」と判断されてしまいます。

### 🐣 「うわっ！画面が赤くなった！びっくりしたー！」
### 🦉 「ふぉっふぉっふぉ。`v-if` は要素そのものを消したり作ったりする強力な魔法じゃ。タイミングよく使えば効果的な演出ができるぞ」

---

[👉 第四章へ進む (chapter4.md)](./chapter4.md)
